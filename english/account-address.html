<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/account-address globals.css" />
    <link rel="stylesheet" href="css/account-address styleguide.css" />
    <link rel="stylesheet" href="css/account-address style.css" />
  </head>
  <body>
    <div class="account-address">
      <div class="add-address-nav-bar">
        <div class="frame">
          <div class="div">
            <img class="logo-removebg" src="https://c.animaapp.com/mdgycv58sOe5Le/img/logo-removebg-1.png" />
            <div class="account"><div class="text-wrapper">Hello, Ahmed Salah</div></div>
          </div>
          <div class="nav">
            <div class="frame-2">
              <div class="div-wrapper">
                <a href="index.html" class="text-wrapper-2">Home</a>
              </div>
              <div class="text-wrapper-3">|</div>
              <div class="frame-3 category-dropdown-trigger">
                <div class="text-wrapper">Category</div>
                <!-- Category Dropdown Menu -->
                <div class="category-dropdown" id="categoryDropdown">
                  <div class="category-column">
                    <div class="category-header">Accessories</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                  </div>
                  <div class="category-column">
                    <div class="category-header">Mobile</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                  </div>
                  <div class="category-column">
                    <div class="category-header">Tablets</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                  </div>
                  <div class="category-column">
                    <div class="category-header" data-clickable="true">View All</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                    <div class="category-item">Lorem ipsum</div>
                  </div>
                </div>
              </div>
              <div class="text-wrapper-3">|</div>
              <div class="frame-3"><div class="text-wrapper">Contact</div></div>
            </div>
          </div>
        </div>
        <div class="frame-4">
          <button class="search-button">
            <img class="search" src="https://c.animaapp.com/mdgycv58sOe5Le/img/search.svg" />
            <div class="text-wrapper-4">Search</div>
          </button>
          <div class="group">
            <div class="overlap-group">
              <div class="text-wrapper-5">En</div>
              <div class="ic-baseline-chevron-wrapper">
                <div class="ic-baseline-chevron">
                  <img class="vector" src="https://c.animaapp.com/mdgycv58sOe5Le/img/vector.svg" />
                </div>
              </div>
            </div>
            <!-- Language Selection Dropdown -->
            <div class="language-dropdown" id="languageDropdown">
              <div class="language-option" data-lang="en">
                <input type="radio" id="english" name="language" value="english" checked>
                <label for="english">English</label>
              </div>
              <div class="language-option" data-lang="ar">
                <input type="radio" id="arabic" name="language" value="arabic" onclick="window.location.href='../arabic/account-address.html'">
                <label for="arabic">Arabic</label>
              </div>
            </div>
          </div>
          <div class="img-wrapper">
            <img class="heart-pop" src="https://c.animaapp.com/mdgycv58sOe5Le/img/heart---pop.svg" />
          </div>
          <div class="img-wrapper">
            <img class="cart-pop" src="https://c.animaapp.com/mdgycv58sOe5Le/img/cart---pop.svg" />
          </div>
        </div>
      </div>
      <p class="home-manage-account">
        <span class="span"><a href="index.html">Home</a></span>
        <span class="text-wrapper-6">&nbsp;</span>
        <span class="span">/ </span>
        <span class="text-wrapper-7"><a href="account-profile.html">Manage Account/</a></span>
        <span class="span">&nbsp;</span>
        <span class="text-wrapper-6">Address Book</span>
      </p>
      <footer class="footer">
        <div class="rectangle-wrapper">
          <img class="rectangle" src="https://c.animaapp.com/mdgycv58sOe5Le/img/rectangle-21.svg" />
        </div>
        <div class="frame-5">
          <p class="p">Stay updated with our latest offers</p>
          <div class="frame-6">
            <div class="frame-7"><p class="text-wrapper-8">Enter your email or WhatsApp number</p></div>
            <div class="frame-8"><div class="text-wrapper-9">Subscribe to our newsletter</div></div>
          </div>
        </div>
        <div class="group-2">
          <img class="logo" src="https://c.animaapp.com/mdgycv58sOe5Le/img/logo-2.png" />
          <div class="group-3">
            <div class="frame-wrapper">
              <div class="frame-9">
                <div class="frame-10">
                  <div class="frame-11">
                    <div class="frame-12">
                      <div class="overlap-group-wrapper">
                        <div class="vector-wrapper">
                          <img class="img" src="https://c.animaapp.com/mdgycv58sOe5Le/img/vector-2.svg" />
                        </div>
                      </div>
                      <div class="text-wrapper-10">Branch Addresses</div>
                    </div>
                  </div>
                  <div class="frame-13">
                    <div class="frame-14">
                      <div class="frame-15">
                        <div class="frame-16">
                          <div class="frame-17">
                            <div class="text-wrapper-11">Cairo</div>
                            <div class="frame-18"><div class="text-wrapper-12">Tahrir - Mahmoudia Street</div></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="frame-19">
                      <div class="text-wrapper-11">Beni Suef</div>
                      <div class="frame-20">
                        <p class="salah-salem-st-al">Shariah Salem - Al-Attar Tower</p>
                        <div class="text-wrapper-13">Al-Jumhuriyah Street</div>
                        <div class="text-wrapper-13">Al-Abassiyr</div>
                        <div class="text-wrapper-13">Beni Suef Sports Club</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="frame-21">
                  <div class="frame-12">
                    <img class="vector-2" src="https://c.animaapp.com/mdgycv58sOe5Le/img/vector-1.svg" />
                    <div class="text-wrapper-10">Contact Us</div>
                  </div>
                  <div class="frame-14">
                    <div class="frame-22">
                      <div class="frame-23"><div class="text-wrapper-14">+(2) 01002976897</div></div>
                    </div>
                    <div class="text-wrapper-15">ceo@attargroup.net</div>
                  </div>
                </div>
                <div class="frame-24">
                  <div class="text-wrapper-10">Account</div>
                  <div class="frame-15">
                    <div class="text-wrapper-14"><a href="account-profile.html">Account</a></div>
                    <div class="text-wrapper-15"><a href="wishlist.html">Wishlist</a></div>
                    <div class="text-wrapper-15"><a href="cart.html">Shopping Cart</a></div>
                    <div class="text-wrapper-15"><a href="login.html">Login / Register</a></div>
                  </div>
                </div>
                <div class="frame-24">
                  <div class="text-wrapper-10">Quick Links</div>
                  <div class="frame-15">
                    <div class="text-wrapper-14"><a href="about.html">About Us</a></div>
                    <div class="text-wrapper-15"><a href="privacy policy.html">Privacy Policy</a></div>
                    <div class="text-wrapper-15"><a href="shipping policy.html">Shipping Policy</a></div>
                    <div class="text-wrapper-15"><a href="refund policy.html">Refund Policy</a></div>
                  </div>
                </div>
              </div>
            </div>
            <img class="frame-25" src="https://c.animaapp.com/mdgycv58sOe5Le/img/frame-950.svg" />
          </div>
        </div>
      </footer>
      <p class="welcome-ahmed-salah">
        <span class="text-wrapper-16">Welcome! </span> <span class="text-wrapper-17">Ahmed Salah</span>
      </p>
      <div class="frame-26">
        <div class="text-wrapper-18">Manage Account</div>
        <div class="frame-27">
          <div class="text-wrapper-19"><a href="account-profile.html">Profile</a></div>
          <div class="text-wrapper-20"><a>Address Book</a></div>
          <div class="text-wrapper-21"><a href="account-orders.html">My Orders</a></div>
        </div>
      </div>
      <div class="frame-28">
        <div class="text-wrapper-18">Shipping Address</div>
        <div class="frame-29">
          <div class="text-wrapper-22">Ahmed Salah</div>
          <p class="text-wrapper-23">Beni Suef, Shariah Salem</p>
          <div class="text-wrapper-23">+201025863485</div>
        </div>
        <div class="frame-30">
          <div class="text-wrapper-24">Edit</div>
          <div class="text-wrapper-24">Delete</div>
        </div>
      </div>
      <div class="add-address" id="addAddressSection">
        <div class="text-wrapper-25">Add New Shipping Address</div>
        <button class="button" id="addAddressBtn"><div class="view-all-products">Add</div></button>
      </div>

      <!-- Address Form Modal -->
      <div id="addressModal" class="address-modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Add New Address</h3>
            <span class="close-modal">&times;</span>
          </div>
          <form id="addressForm">
            <div class="form-group">
              <label for="fullName">Full Name</label>
              <input type="text" id="fullName" name="fullName" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" name="phone" required>
            </div>
            <div class="form-group">
              <label for="address">Address</label>
              <textarea id="address" name="address" rows="2" required></textarea>
            </div>
            <div class="form-group">
              <label for="city">City</label>
              <input type="text" id="city" name="city" required>
            </div>
            <div class="form-group">
              <label for="postalCode">Postal Code</label>
              <input type="text" id="postalCode" name="postalCode" required>
            </div>
            <div class="form-actions">
              <button type="button" class="cancel-btn">Cancel</button>
              <button type="submit" class="save-btn">Save Address</button>
            </div>
          </form>
        </div>
      </div>
      <div class="frame-31">
        <div class="text-wrapper-18">Shipping Address</div>
        <div class="frame-29">
          <div class="text-wrapper-22">Ahmed Salah</div>
          <p class="text-wrapper-23">Beni Suef, Shariah Salem</p>
          <div class="text-wrapper-23">+201025863485</div>
        </div>
        <div class="frame-30">
          <div class="text-wrapper-24">Edit</div>
          <div class="text-wrapper-24">Delete</div>
        </div>
      </div>

    </div>
    
    <script>
      // Language dropdown functionality
      const languageButton = document.querySelector('.overlap-group');
      const languageDropdown = document.querySelector('.language-dropdown');
      const languageOptions = document.querySelectorAll('.language-option');
      const languageText = document.querySelector('.text-wrapper-5');

      // Toggle dropdown when clicking on language button
      languageButton.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
      });

      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!languageButton.contains(e.target) && !languageDropdown.contains(e.target)) {
          languageDropdown.classList.remove('show');
        }
      });

      // Handle language selection
      languageOptions.forEach(option => {
        option.addEventListener('click', function() {
          const lang = this.getAttribute('data-lang');
          const label = this.querySelector('label').textContent;
          
          // Update the displayed language text
          if (lang === 'en') {
            languageText.textContent = 'En';
          } else if (lang === 'ar') {
            languageText.textContent = 'ع';
          }
          
          // Update radio button selection
          const radio = this.querySelector('input[type="radio"]');
          radio.checked = true;
          
          // Close dropdown
          languageDropdown.classList.remove('show');
        });
      });

      // Category dropdown functionality
      const categoryButton = document.querySelector('.category-dropdown-trigger');
      const categoryDropdown = document.querySelector('.category-dropdown');

      // Toggle dropdown when clicking on category button
      categoryButton.addEventListener('click', function(e) {
        e.stopPropagation();
        categoryDropdown.classList.toggle('show');
      });

      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!categoryButton.contains(e.target) && !categoryDropdown.contains(e.target)) {
          categoryDropdown.classList.remove('show');
        }
      });

      // Handle "View All" click
      const viewAllHeaders = document.querySelectorAll('.category-header');
      viewAllHeaders.forEach(header => {
        if (header.textContent === 'View All') {
          header.addEventListener('click', function() {
            window.location.href = 'category.html';
          });
        }
      });

      // Search functionality
      const searchInput = document.querySelector('.text-wrapper-4');
      const searchButton = document.querySelector('.search-button');
      let searchQuery = '';

      // Make search input editable and handle placeholder
      if (searchInput) {
        searchInput.contentEditable = true;
        
        // Handle focus - clear placeholder
        searchInput.addEventListener('focus', function() {
          if (this.textContent === 'Search') {
            this.textContent = '';
          }
        });
        
        // Handle blur - restore placeholder if empty
        searchInput.addEventListener('blur', function() {
          if (this.textContent.trim() === '') {
            this.textContent = 'Search';
          }
        });
        
        // Handle input
        searchInput.addEventListener('input', function() {
          searchQuery = this.textContent.trim();
        });
        
        // Handle enter key
        searchInput.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            if (searchQuery && searchQuery.length > 0) {
              // Simulate search - you can replace this with actual search logic
              const hasResults = Math.random() > 0.5; // Random for demo
              if (hasResults) {
                window.location.href = 'search.html';
              } else {
                window.location.href = 'empty-search.html';
              }
            }
          }
        });
      }

      // Search button click handler
      if (searchButton) {
        searchButton.addEventListener('click', function() {
          if (searchQuery && searchQuery.length > 0) {
            // Simulate search - you can replace this with actual search logic
            const hasResults = Math.random() > 0.5; // Random for demo
            if (hasResults) {
              window.location.href = 'search.html';
            } else {
              window.location.href = 'empty-search.html';
            }
          }
        });
      }

      // Navigation functionality
      // Home navigation
      const homeLink = document.querySelector('.div-wrapper');
      if (homeLink) {
        homeLink.addEventListener('click', function() {
          window.location.href = 'index.html';
        });
      }

      // Contact navigation
      const contactLink = document.querySelector('.frame-3');
      if (contactLink) {
        contactLink.addEventListener('click', function() {
          window.location.href = 'contact.html';
        });
      }

      // Category navigation (if exists)
      const categoryLink = document.querySelector('.frame-3:not(.category-dropdown-trigger)');
      if (categoryLink) {
        categoryLink.addEventListener('click', function() {
          window.location.href = 'category.html';
        });
      }

      // Wishlist navigation
      const wishlistIcon = document.querySelector('.heart-pop');
      if (wishlistIcon) {
        wishlistIcon.addEventListener('click', function() {
          // Simulate wishlist check - you can replace this with actual logic
          const hasWishlistItems = Math.random() > 0.3; // Random for demo
          if (hasWishlistItems) {
            window.location.href = 'wishlist.html';
          } else {
            window.location.href = 'empty-wishlist.html';
          }
        });
      }

      // Cart navigation
      const cartIcon = document.querySelector('.cart-pop');
      if (cartIcon) {
        cartIcon.addEventListener('click', function() {
          // Simulate cart check - you can replace this with actual logic
          const hasCartItems = Math.random() > 0.4; // Random for demo
          if (hasCartItems) {
            window.location.href = 'cart.html';
          } else {
            window.location.href = 'empty-cart.html';
          }
        });
      }

      // Address Management Functionality
      const addAddressButton = document.querySelector('#addAddressBtn');
      const addressModal = document.querySelector('#addressModal');
      const addressForm = document.querySelector('#addressForm');
      const closeModal = document.querySelector('.close-modal');
      const cancelBtn = document.querySelector('.cancel-btn');
      const addressCards = document.querySelectorAll('.frame-28, .frame-31');
      
      // Track number of addresses
      let addressCount = addressCards.length;
      const maxAddresses = 4;
      
      // Add new address functionality
      if (addAddressButton) {
        addAddressButton.addEventListener('click', function() {
          if (addressCount >= maxAddresses) {
            alert('Maximum 4 addresses allowed');
            return;
          }
          addressModal.style.display = 'block';
        });
      }

      // Close modal functionality
      if (closeModal) {
        closeModal.addEventListener('click', function() {
          addressModal.style.display = 'none';
          addressForm.reset();
        });
      }

      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          addressModal.style.display = 'none';
          addressForm.reset();
        });
      }

      // Close modal when clicking outside
      window.addEventListener('click', function(e) {
        if (e.target === addressModal) {
          addressModal.style.display = 'none';
          addressForm.reset();
        }
      });

      // Handle form submission
      if (addressForm) {
        addressForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const formData = new FormData(addressForm);
          const addressData = {
            fullName: formData.get('fullName'),
            phone: formData.get('phone'),
            address: formData.get('address'),
            city: formData.get('city'),
            postalCode: formData.get('postalCode')
          };
          
          // Create new address card
          const newAddressCard = createNewAddressCard(addressData);
          
          // Insert the new card in the correct position
          const addAddressSection = document.querySelector('#addAddressSection');
          if (addAddressSection && newAddressCard) {
            addAddressSection.parentNode.insertBefore(newAddressCard, addAddressSection);
            addressCount++;
            
            // Update button state
            if (addressCount >= maxAddresses) {
              addAddressButton.style.opacity = '0.5';
              addAddressButton.style.cursor = 'not-allowed';
            }
            
            // Reposition all cards and add address section
            repositionAddressCards();
          }
          
          // Close modal and reset form
          addressModal.style.display = 'none';
          addressForm.reset();
        });
      }

      // Delete address functionality
      addressCards.forEach(card => {
        const deleteButton = card.querySelector('.text-wrapper-24:last-child');
        if (deleteButton && deleteButton.textContent === 'Delete') {
          deleteButton.addEventListener('click', function() {
            if (confirm('Are you sure you want to delete this address?')) {
              card.remove();
              addressCount--;
              
              if (addressCount < maxAddresses) {
                addAddressButton.style.opacity = '1';
                addAddressButton.style.cursor = 'pointer';
              }
              
              // Reposition all cards and add address section
              repositionAddressCards();
            }
          });
        }
      });

      // Edit address functionality
      addressCards.forEach(card => {
        const editButton = card.querySelector('.text-wrapper-24:first-child');
        if (editButton && editButton.textContent === 'Edit') {
          editButton.addEventListener('click', function() {
            alert('Edit functionality - you can implement a modal or form here');
          });
        }
      });

      // Function to create a new address card
      function createNewAddressCard(addressData) {
        const newCard = document.createElement('div');
        newCard.className = 'frame-28';
        
        // Calculate position based on current count
        const row = Math.floor(addressCount / 2);
        const col = addressCount % 2;
        const leftPosition = 416 + (col * 380); // 380px gap between cards
        const topPosition = 224 + (row * 240); // 240px gap between rows
        
        newCard.style.cssText = `
          display: flex;
          flex-direction: column;
          width: 357px;
          align-items: flex-start;
          justify-content: center;
          gap: 16px;
          padding: 16px;
          position: absolute;
          top: ${topPosition}px;
          left: ${leftPosition}px;
          background-color: #ffffff;
          border-radius: 8px;
          box-shadow: 0px 0px 4px #00000040;
        `;
        
        newCard.innerHTML = `
          <div class="frame-29">
            <div class="text-wrapper-22">${addressData.fullName}</div>
            <p class="text-wrapper-23">${addressData.address}</p>
            <div class="text-wrapper-23">${addressData.phone}</div>
            <div class="text-wrapper-23">${addressData.city}, ${addressData.postalCode}</div>
          </div>
          <div class="frame-30">
            <div class="text-wrapper-24" style="cursor: pointer;">Edit</div>
            <div class="text-wrapper-24" style="cursor: pointer;">Delete</div>
          </div>
        `;
        
        // Add event listeners to the new card
        const deleteButton = newCard.querySelector('.text-wrapper-24:last-child');
        const editButton = newCard.querySelector('.text-wrapper-24:first-child');
        
        if (deleteButton) {
          deleteButton.addEventListener('click', function() {
            if (confirm('Are you sure you want to delete this address?')) {
              newCard.remove();
              addressCount--;
              
              if (addressCount < maxAddresses) {
                addAddressButton.style.opacity = '1';
                addAddressButton.style.cursor = 'pointer';
              }
              
              // Reposition all cards and add address section
              repositionAddressCards();
            }
          });
        }
        
        if (editButton) {
          editButton.addEventListener('click', function() {
            alert('Edit functionality - you can implement a modal or form here');
          });
        }
        
        return newCard;
      }

      // Function to reposition address cards and add address section
      function repositionAddressCards() {
        const allCards = document.querySelectorAll('.frame-28, .frame-31');
        const addAddressSection = document.querySelector('#addAddressSection');
        
        // Reposition address cards
        allCards.forEach((card, index) => {
          const row = Math.floor(index / 2);
          const col = index % 2;
          const leftPosition = 416 + (col * 380);
          const topPosition = 224 + (row * 240);
          
          card.style.left = leftPosition + 'px';
          card.style.top = topPosition + 'px';
        });
        
        // Reposition add address section based on number of addresses
        if (addAddressSection) {
          if (allCards.length >= 3) {
            // 3-4 addresses: position add box on the right side (4th position)
            const row = Math.floor(allCards.length / 2);
            const col = allCards.length % 2;
            const leftPosition = 416 + (col * 380);
            const topPosition = 224 + (row * 240);
            
            addAddressSection.style.position = 'absolute';
            addAddressSection.style.top = topPosition + 'px';
            addAddressSection.style.left = leftPosition + 'px';
            addAddressSection.style.width = '357px';
          } else {
            // 1-2 addresses: position add box below (centered)
            addAddressSection.style.position = 'absolute';
            addAddressSection.style.top = '464px';
            addAddressSection.style.left = '416px';
            addAddressSection.style.width = '737px';
          }
        }
        
        // Extend page height if needed
        extendPageHeight();
      }

      // Function to extend page height
      function extendPageHeight() {
        const allCards = document.querySelectorAll('.frame-28, .frame-31');
        
        if (allCards.length >= 4) {
          // Add extra padding to accommodate the content
          document.querySelector('.account-address').style.paddingBottom = '400px';
        } else if (allCards.length >= 2) {
          document.querySelector('.account-address').style.paddingBottom = '350px';
        } else {
          document.querySelector('.account-address').style.paddingBottom = '300px';
        }
      }

      // Initialize page height and positioning
      extendPageHeight();
      repositionAddressCards();
    </script>
  </body>
</html>
